<html>

<head>
</head>

<body>

<div id="MainNavPage" data-role="page" data-add-back-btn="false" data-back-btn-text="back" data-back-btn-theme="c">

    <div data-theme="c" data-role="header" data-position="fixed" >
        <h1><img src="img/splash/logo.png"></h1>
        <a href="#" data-icon="home" id="logout_submit" class="ui-btn-right">Logout</a>

    </div>

    <div data-role="content">

        <!--<div style="text-align: center; padding-bottom: 10px "><img src="img/splash/logo_big.png"></div>-->

        <div class="ui-grid-b" style="padding-left: 75px">
            <!-- first row -->
            <div class="ui-block-a" style="width: 210px;" >
                <a id="tsNavTellStoryBtn" href="#" ><img src="img/navbut/tellStory.png"></a>
            </div>
            <div class="ui-block-b" style="width: 210px;">
                <a id="tsNavMediaCaptureBtn" href="#" ><img src="img/navbut/addMedia.png"></a>
            </div>
            <div class="ui-block-c" style="width: 210px;">
                <a id="tsNavMediaLibBtn" href="#" ><img src="img/navbut/mediaLIbrary.png"></a>
            </div>
            <div class="ui-block-d" style="width: 210px;">
                <a id="tsNavStoryLibBtn" href="#" ><img src="img/navbut/storyLibrary.png"></a>
            </div>
            <!--second row-->
            <!--<div class="ui-block-a" style="width: 210px;">-->
                <!--<a href="demo.html" ><img src="img/navbut/myLifeStory.png"></a>-->
            <!--</div>-->
            <!--<div class="ui-block-b" style="width: 210px;">-->
                <!--<a href="media-library-grid.html" ><img src="img/navbut/requestStory.png"></a>-->
            <!--</div>-->
            <!--<div class="ui-block-c" style="width: 210px;">-->
                <!--<a href="test.html" ><img src="img/navbut/inviteFriends.png"></a>-->
            <!--</div>-->
            <!--<div class="ui-block-d" style="width: 210px;">-->
                <!--<a href="addtestpop.html" ><img src="img/navbut/myAccount.png"></a>-->
            <!--</div>-->
        </div>
    </div>

    <script>
        console.log("MainNavPage js: Executing");
        //(document).on("click", "a.foo", fn)
        // $(document).on('pageinit', '#MainNavPage', function(event) {
        // $('#MainNavPage').live('pageinit', function(event) {
        $(document).on('pagebeforeshow', '#MainNavPage', function(){

            console.log("MainNavPage: pagebeforeshow(): start");

            $('#tsNavTellStoryBtn').removeClass('ui-disabled');
            $('#tsNavMediaLibBtn').removeClass('ui-disabled');
            $('#tsNavStoryLibBtn').removeClass('ui-disabled');
            $('#tsNavMediaCaptureBtn').removeClass('ui-disabled');
            $('#logout_submit').removeClass('ui-disabled');

            $(document).off('click', '#tsNavTellStoryBtn').on('click', '#tsNavTellStoryBtn',function(event) {

                console.log("MainNavPage: tsNavTellStoryBtn: click");

                $('#tsNavTellStoryBtn').addClass('ui-disabled');

                removeNewStoryStorage();

                $.mobile.changePage('storystart.html');

            });

            $(document).off('click', '#tsNavMediaLibBtn').on('click', '#tsNavMediaLibBtn',function(event) {

                console.log("MainNavPage: tsNavMediaLibBtn: click");

                $('#tsNavMediaLibBtn').addClass('ui-disabled');

                $.mobile.changePage('media-library-grid.html');

            });
            $(document).off('click', '#tsNavStoryLibBtn').on('click', '#tsNavStoryLibBtn',function(event) {

                console.log("MainNavPage: tsNavStoryLibBtn: click");

                $('#tsNavStoryLibBtn').addClass('ui-disabled');

                $.mobile.changePage('story-directory.html');

            });
            $(document).off('click', '#tsNavMediaCaptureBtn').on('click', '#tsNavMediaCaptureBtn',function(event) {

                console.log("MainNavPage: tsNavMediaCaptureBtn: click");

                $('#tsNavMediaCaptureBtn').addClass('ui-disabled');

                $.mobile.changePage('media-capture.html');

            });

            //$("#logout_submit").click(function(event) {
            $(document).off('click', '#logout_submit').on('click', '#logout_submit',function(event) {

                console.log("MainNavPage: logout_submit: click()");

                $('#logout_submit').addClass('ui-disabled');

                $.ajax({
                    type: "GET",
                    url: tsServiceURLDomain + "tssvc/resourcesS/logout",
                    //data:'user='+ $('#user').val() +'&pass='+ $('#pass').val(),
                    cache: false,
                    success: function(data) {
                        console.log("ManNavPage: logout: success: data=" + data);
                        //
                        // alert("data is" + data)   ;
                        $.mobile.changePage("index.html");
                    },
                    done: function (data) {
                        alert("done : " + data);
                    },
                    error: function(xhr, status, error) {
                        console.log("ManNavPage: logout: error:");
                        alert("in error");
                        alert("status: " + status) ;
                        alert("error: " + error);
                        alert(xhr.responseText);
                        $.mobile.changePage("index.html");
                    }
                })
            })
        });


    </script>

</div>    <!-- end of main nav page -->

</body>

</html>